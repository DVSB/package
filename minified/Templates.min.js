"use strict";var Templates=function(){require("../library/_Boilerplate").call(this),this.getAllTemplateFiles()};require("util").inherits(Templates,require("../library/_Boilerplate")),Templates.prototype.getAllTemplateFiles=function(){var a=this,b="./"+global.downpress.config["dir-templates"];this.walkFiles(b,function(b){a.files=b,a.removeNonHtmlFiles()})},Templates.prototype.removeNonHtmlFiles=function(){this.parseAllTemplateFiles()},Templates.prototype.parseAllTemplateFiles=function(){function a(a,c){b.readFile(a,c,b)}var b=this;this.files.forEach(a)},Templates.prototype.readFile=function(a,b,c){function d(){global.downpress.templates=c.templatesObj,c.emit("ready")}function e(a,e){if(a)throw a;c.templatesObj[h]=e+"";var f=c.files.length-1;f===b&&d()}this.templatesObj={};var f=a.lastIndexOf("/")+1,g=a.slice(f),h=g.split(".html")[0];c.fs.readFile(a,e)},module.exports=function(){return new Templates};