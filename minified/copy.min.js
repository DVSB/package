"use strict";function copy(a,b,c,d){"function"!=typeof c||d||(d=c,c=null),d=d||function(){},fs.lstat(a,function(e,f){if(e)return d(e);var g=null;if(f.isDirectory()){var h=b.split(path.sep);h.pop(),g=h.join(path.sep)}else g=path.dirname(b);fs.exists(g,function(e){return e?ncp(a,b,{filter:c},d):void mkdir.mkdirs(g,function(e){return e?d(e):void ncp(a,b,{filter:c},d)})})})}function copySync(a,b,c){c=c||function(){return!0};var d=fs.lstatSync(a),e=fs.exists(b),f=!1;if(d.isFile())c instanceof RegExp?f=c.test(a):"function"==typeof c&&(f=c(a)),f&&(e||create.createFileSync(b),copyFileSync(a,b));else if(d.isDirectory()){e||mkdir.mkdirsSync(b);var g=fs.readdirSync(a);g.forEach(function(c){copySync(a+"/"+c,b+"/"+c)})}}function copy(a,b,c,d){"function"!=typeof c||d||(d=c,c=null),d=d||function(){},fs.lstat(a,function(e,f){if(e)return d(e);var g=null;if(f.isDirectory()){var h=b.split(path.sep);h.pop(),g=h.join(path.sep)}else g=path.dirname(b);fs.exists(g,function(e){return e?ncp(a,b,{filter:c},d):void mkdir.mkdirs(g,function(e){return e?d(e):void ncp(a,b,{filter:c},d)})})})}function copySync(a,b,c){c=c||function(){return!0};var d=fs.lstatSync(a),e=fs.exists(b),f=!1;if(d.isFile())c instanceof RegExp?f=c.test(a):"function"==typeof c&&(f=c(a)),f&&(e||create.createFileSync(b),copyFileSync(a,b));else if(d.isDirectory()){e||mkdir.mkdirsSync(b);var g=fs.readdirSync(a);g.forEach(function(c){copySync(a+"/"+c,b+"/"+c)})}}var fs=require("fs"),ncp=require("ncp").ncp,path=require("path"),mkdir=require("./mkdir"),create=require("./create");module.exports.copy=copy,module.exports.copySync=copySync;var BUF_LENGTH=65536,_buff=new Buffer(BUF_LENGTH),copyFileSync=function(a,b){var c,d,e,f;for(d=fs.openSync(a,"r"),e=fs.openSync(b,"w"),c=1,f=0;c>0;)c=fs.readSync(d,_buff,0,BUF_LENGTH,f),fs.writeSync(e,_buff,0,c),f+=c;return fs.closeSync(d),fs.closeSync(e)},fs=require("fs"),ncp=require("ncp").ncp,path=require("path"),mkdir=require("./mkdir"),create=require("./create");module.exports.copy=copy,module.exports.copySync=copySync;var BUF_LENGTH=65536,_buff=new Buffer(BUF_LENGTH),copyFileSync=function(a,b){var c,d,e,f;for(d=fs.openSync(a,"r"),e=fs.openSync(b,"w"),c=1,f=0;c>0;)c=fs.readSync(d,_buff,0,BUF_LENGTH,f),fs.writeSync(e,_buff,0,c),f+=c;return fs.closeSync(d),fs.closeSync(e)};