"use strict";var filesystem=require("fs"),Generate=function(){require("../library/_Boilerplate").call(this),this.parseMarkdowns(),this.removeMdFilesInBuild()};require("util").inherits(Generate,require("../library/_Boilerplate")),Generate.prototype.parseMarkdowns=function(){var a=this,b=global.downpress.markdowns;b.forEach(function(b){a.buildMarkdownAndSaveIt(b)})},Generate.prototype.buildMarkdownAndSaveIt=function(a){var b=a.template,c=global.downpress.templates[b];if(c){try{var d=this.createTemplateObject(c,a)}catch(e){this.log(a._origin+" "+e,!0)}var f="./"+global.downpress.config["dir-build"],g=f+a._path+a._target;this.createNewFile(g,d)}},Generate.prototype.createNewFile=function(a,b){this.fs.writeFileSync(a,b)},Generate.prototype.createTemplateObject=function(a,b){return this.underscore.template(a,{_:this.underscore,underscore:this.underscore,local:b,markdowns:global.downpress.markdowns,statics:global.downpress.statics,templates:global.downpress.templates})},Generate.prototype.removeMdFilesInBuild=function(){function a(a){if(a)throw a;e++,e===b.length&&d.emit("ready")}var b=global.downpress.markdowns,c="./"+global.downpress.config["dir-build"],d=this,e=0;b.forEach(function(b){var e=c+b._path+b._origin;d.fs.unlink(e,a)})},module.exports=function(){return new Generate};